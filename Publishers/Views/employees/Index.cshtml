@model IEnumerable<Publishers.Models.employee>

@{
    ViewBag.Title = "Index";
}

<h2>Recherche</h2>

<form action="" method="post" id="formRecherche">
    <div class="form-horizontal">
        <div class="form-group">
            @Html.Label("Editeurs", htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.DropDownList("Editeurs", "Tous")
            </div>
        </div>
        <div class="form-group">
            @Html.Label("Nom de l'employe", htmlAttributes: new { @class = "control-label col-md-2" })
            @Html.TextBox("nomEmp", "", new { htmlAttributes = new { @class = "form-control" } })

            @*Gestion de la pagination*@
            <input type="hidden" name="PageCourante" id="PageCourante" value="@ViewBag.PageCourante" />
            <input type="hidden" name="PageCount" id="PageCount" value="@ViewBag.PageCount" />
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Recherche" class="btn btn-default" />
            </div>
        </div>
    </div>
</form>

<h2>Liste des Employés</h2>

<p>
    @Html.ActionLink("Ajouter un employé", "Create")
</p>

@using PagedList.Mvc;

@*Affichage des pages avec les boutons précédent, suivant, etc. Les boutons sont gérés par le script « liste.js »*@
@Html.PagedListPager(Model as PagedList.IPagedList, page => "#")

@*Affichage des résultats*@
<div id="update-message" class="alert alert-info" style="display: none"></div>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.job.job_desc)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.publisher.pub_name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.fname)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.lname)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.job_lvl)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.hire_date)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr id="@item.emp_id">
        <td id="nomEmp">
            @Html.DisplayFor(modelItem => item.job.job_desc)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.publisher.pub_name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.fname)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.lname)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.job_lvl)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.hire_date)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.emp_id }) |
            @Html.ActionLink("Details", "Details", new { id = item.emp_id }) |
            @*@Html.ActionLink("Delete", "Delete", new { id = item.emp_id })*@
            <a class="btn" href="#" id="supprEmp" name="supprEmp" style="padding-left:2px; padding-top:4px"><i class="fa fa-trash"></i></a>
        </td>
    </tr>
}
</table>

@* Script pour la pagination *@

@section scripts {
    <script src="/Scripts/Site/Employes.js" type="text/javascript"></script>
}
